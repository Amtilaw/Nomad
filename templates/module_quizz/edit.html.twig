{% extends 'base.html.twig' %}

{% block title %}Hello ModuleQuizzController!
{% endblock %}
{% block baseStylesheets %}
	<link rel="stylesheet" href="{{ asset('bower_components/select2/dist/css/select2.min.css') }}">
	<link rel="stylesheet" href="{{ asset('assets/css/customizedStyle.css') }}">
{% endblock %}

{% block body %}
	<div id="page_content" class="height-700">

		<div id="page_content_inner" class="height-700">

			<div class="md-card height-700">
				<div class="uk-grid uk-grid uk-grid-collapse uk-grid-divider uk-flex" data-uk-grid-match>

					<div class="uk-width-large-1-6 uk-width-medium-1-3 js_collapsible_column height-700">

						<div class="md-card-toolbar {{pageColor}}">
							<div
								class="md-card-toolbar-actions uk-hidden-small">
								{# <i class="md-icon material-icons js_hidden">&#xE5D5;</i> #}
								<a href="#" data-column-toggle>
									<i class="md-icon material-icons" title="Collapse">format_indent_decrease</i>
									<i class="md-icon material-icons" style="display: none" title="Expand">format_indent_increase</i>
								</a>
							</div>
							<h1 class="md-card-toolbar-heading-text js_hidden uk-text-overflow pageTitle">
								<i class="material-icons">{{pageIcon}}</i>
							</span>
							<span>{{pageTitle}}</span>
						</h1>
					</div>

					{# menu contextuel #}
					{% include rootTemplate ~ '/component/contextual_menu.html.twig' %}

				</div>

				<div class="uk-flex-item-1">
					<!-- -->
					{# nav bar contextuel #}
					{% include rootTemplate ~ '/component/contextual_secondary_nav.html.twig' %}

						<div
						class="md-card-content mostly-customized-scrollbar mainScroll"> <!-- Tabs content -->
						<div class="tab-pane fade show active" id="ex1-tabs-1" role="tabpanel" aria-labelledby="ex1-tab-1">


							<h1>Modification d'une question</h1>
							<div style="margin:30px">
								<form action="{{ path('module_edit',{categoryId}) }}" method="POST">


									<div class="md-card-content">
										<div class="uk-grid">
											<div class="uk-width-1-1">
												<ul class="uk-tab" data-uk-tab="{connect:'#tabs_1_content'}" id="tabs_1">
													<li class="uk-active">
														<a href="#">Question</a>
													</li>

												</ul>
												<ul id="tabs_1_content" class="uk-switcher uk-margin">
													<li>

														<div class="uk-grid" data-uk-grid-margin>

															<div class="uk-width-1 md-input-filled">
																<br>
																<label for="exampleFormControlInput1" class="form-label">Libelle de la question</label>
																<input type="text" class="md-input label-fixed customizedInput" id="libelleQuestion" placeholder="Est-ce une question?" name="questionLibelle" value="{{ categoryInfos.libelle }}">
															</div>


															<div class="uk-width-medium-1-2 md-input-filled">
																<label for="lvl" class="form-label">Difficulté de la question</label>
																<select class="md-input label-fixed customizedInput" aria-label="Default select example" name="lvl">
																	<option value="{{level.id}}">level precedament selectioner : {{level.nom}}</option>
																	{% for level in levels %}
																		<option value="{{ level.id }}" {{ level.selected }}>{{ level.nom }}</option>
																	{% endfor %}
																</select>
															</div>
															<div class="uk-width-medium-1-2 md-input-filled">
																<label for="lvl" class="form-label">type de question</label>
																<select class="md-input label-fixed customizedInput" aria-label="Default select example" name="type">
																	<option value="{{type.id}}">type actuelle : {{type.nom}}</option>
																	{% for type in types %}
																		<option value="{{ type.id }}">{{ type.nom }}</option>
																	{% endfor %}
																</select>
															</div>


														</div>


														<div class="uk-grid" data-uk-grid-margin>

															<div class="uk-width-medium-1-2 md-input-filled">
																<label for="lvl" class="form-label">video selection</label>
                                                    
																<select class="md-input label-fixed customizedInput" aria-label="Default select example" name="video" id="idVideoForm">
																	<option value="{{video.id}}" selected>video actuelle : {{video.url}}</option>
																	{% for video in videos %}
																		<option value="{{ video.id }}">{{ video.url }}</option>
																	{% endfor %}
																</select>
															</div>

															<div class="uk-width-medium-1-2 md-input-filled">
																<label for="lvl" class="form-label">Pallier selection</label>

																<select class="md-input label-fixed customizedInput" aria-label="Default select example" name="palliers" id="idPallier">
                                                                    <option value="{{palier_actuel.id}}">palier actuelle : {{palier_actuel.titre_groupe_question}}</option>

																	<option value="0">Nouveau pallier</option>
																	{% for pallier in listePallier %}
																		<option value="{{ pallier.id }}" >{{pallier.titre_groupe_question}} : {{ pallier.timecode }}</option>
																	{% endfor %}
																</select>
															</div>
															<div id="newPallier" class="uk-width-1 md-input-filled">
																<div class="uk-width-1 md-input-filled">
																	<br>
																	<label for="exampleFormControlInput1" class="form-label">Ajouter un nouveau pallier pour cette video</label>
																	<input type="text" class="md-input label-fixed customizedInput" id="pallier" placeholder="minute.seconde" name="pallier">
																</div>
																<div class="uk-width-1 md-input-filled">
																	<br>
																	<label for="exampleFormControlInput1" class="form-label">titre du pallier</label>
																	<input type="text" class="md-input label-fixed customizedInput" id="titrePallier" placeholder="" name="titrePallier">
																</div>

															</div>
														</div>
													</li>
												</div>
											</li>
										</ul>
									</div>
								</div>
							</div>
							<input type="hidden" name="id" value="{{ categoryInfos.id }}"/>

						</div>
						<br>
						<div class="col-12">
							<button class="btn btn-primary" type="submit"> la question</button>
							<button class="md-btn md-btn-default cancelBtn" name="submit" value="annuler" href="javascript:void(0)">ANNULER</button>
						</div>
					</form>
				</div>

				<!-- Tabs content -->

			</div>

		</div>

		<div class="uk-width-large-1-5 uk-width-medium-1-3 js_collapsible_column collapsed">

			<div class="md-card-toolbar md-bg-grey-100">
				<div class="md-card-toolbar-actions uk-hidden-small">
					<a href="#" data-column-toggle>
						<i class="md-icon material-icons" title="Collapse">format_indent_increase</i>
						<i class="md-icon material-icons" style="display: none" title="Expand">format_indent_decrease</i>
					</a>
				</div>
				<h3 class="md-card-toolbar-heading-text js_hidden">
					Filtres
				</h3>
			</div>

			{# Filters #}
			{% include rootTemplate ~ '/component/contextual_filters.html.twig' %}

		</div>

	</div>
</div></div></div>{% endblock %}{% block baseJavascripts %}<script src="{{ asset('bower_components/jquery-ui/jquery-ui.min.js') }}"></script><script>let countProps = 2;
let pallierJson;
$('#newPallier').css('display', 'none');
$("#idPallier").change(function () {
if ($("#idPallier :selected").val() == 0) {
console.log("yes");
$("#newPallier").css("display", "block");
} else {
$("#newPallier").css("display", "none");
}
});

$("#typeProps").change(function () {
if (this.value == 1) {
$("#propositionsAdd").css("display", "block");
} else {
$("#propositionsAdd").css("display", "none");
}
});

$("#videoSelection").change(function () {
getPalliersByVideo(this.value);
});


function getPalliersByVideo(idVideo) {
const url = "{{ path('module_edit', {categoryId : categoryId}) }}";




console.log(idVideo);

$.ajax({
type: "post",
url: url,
data: {
idVideo: parseInt(idVideo)
}
}).done(function (data) {
pallierJson = data;
}).fail(function () {
console.log("fail");
});


}
function addProps() {
countProps++;
let newProps = document.createElement("div");
newProps.innerHTML = ` <label for="exampleFormControlInput1" class="form-label"> Libelle de la proposition n°${countProps} </label>
											<input type="text" class="md-input label-fixed customizedInput" id="libelleProps${countProps}" placeholder="Paris" name="libelleProps${countProps}">
											<input type="checkbox" data-switchery data-switchery-color="#3367d6" id="correct${countProps}" name="correct${countProps}" > <label for="correct">Is correct</label> `
$("#newPropsAdd").append(newProps);
}</script>{% endblock %}

